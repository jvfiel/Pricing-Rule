[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Invoice", 
  "modified": "2019-09-07 20:47:50.123748", 
  "name": "Sales Invoice-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "function isEmpty(obj) {\n    for(var key in obj) {\n        if(obj.hasOwnProperty(key))\n            return false;\n    }\n    return true;\n}\n\nfrappe.ui.form.on(\"Sales Invoice Item\", {\n    item_code: function (doc, cdt, cdn) {\n          let me = this;\n        let row = frappe.get_doc(cdt, cdn);\n        console.log(\"pricing rule**\");\n        console.log(row);\n\n        if(row.item_code && row.uom) {\n            frappe.call({\n                method: \"pricing_rule.pricing_rule.get_pricing\",\n                args: {\n                    item: row.item_code,\n                    uom: row.uom\n                },\n                callback: function (r) {\n                        if(!isEmpty(r.message)) {\n                            // row.margin_type = \"Percentage\";\n                            // row.discount_percentage = r.message[0].discount_percentage;\n                            console.log(r.message[0].name);\n                            row.pricing_rule = r.message[0].name;\n                        }\n                        else {\n                            row.pricing_rule = \"\";\n                            frappe.msgprint(\"no Princing Rule found.\");\n                        }\n                        refresh_field(\"items\");\n                }\n            });\n        }\n    }\n    ,\n    uom: function (doc, cdt, cdn) {\n          let me = this;\n        let row = frappe.get_doc(cdt, cdn);\n        console.log(\"pricing rule**\");\n        console.log(row);\n\n            if (row.item_code && row.uom) {\n                frappe.call({\n                    method: \"pricing_rule.pricing_rule.get_pricing\",\n                    args: {\n                        item: row.item_code,\n                        uom: row.uom\n                    },\n                    callback: function (r) {\n                        console.log(r);\n                        if(!isEmpty(r.message)) {\n                            // row.margin_type = \"Percentage\";\n                            // row.discount_percentage = r.message[0].discount_percentage;\n                            console.log(r.message[0].name);\n                            row.pricing_rule = r.message[0].name;\n                        }\n                        else {\n                            row.pricing_rule = \"\";\n                            frappe.msgprint(\"no Princing Rule found.\");\n                        }\n                        refresh_field(\"items\");\n                    }\n                });\n            }\n    }\n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Order", 
  "modified": "2019-09-07 18:49:32.215064", 
  "name": "Sales Order-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "function isEmpty(obj) {\n    for(var key in obj) {\n        if(obj.hasOwnProperty(key))\n            return false;\n    }\n    return true;\n}\n\nfrappe.ui.form.on(\"Sales Order Item\", {\n    item_code: function (doc, cdt, cdn) {\n          let me = this;\n        let row = frappe.get_doc(cdt, cdn);\n        console.log(\"pricing rule**\");\n        console.log(row);\n\n        if(row.item_code && row.uom) {\n            frappe.call({\n                method: \"pricing_rule.pricing_rule.get_pricing\",\n                args: {\n                    item: row.item_code,\n                    uom: row.uom\n                },\n                callback: function (r) {\n                        if(!isEmpty(r.message)) {\n                            // row.margin_type = \"Percentage\";\n                            // row.discount_percentage = r.message[0].discount_percentage;\n                            console.log(r.message[0].name);\n                            row.pricing_rule = r.message[0].name;\n                        }\n                        else {\n                            row.pricing_rule = \"\";\n                            frappe.msgprint(\"no Princing Rule found.\");\n                        }\n                        refresh_field(\"items\");\n                }\n            });\n        }\n    }\n    ,\n    uom: function (doc, cdt, cdn) {\n          let me = this;\n        let row = frappe.get_doc(cdt, cdn);\n        console.log(\"pricing rule**\");\n        console.log(row);\n\n            if (row.item_code && row.uom) {\n                frappe.call({\n                    method: \"pricing_rule.pricing_rule.get_pricing\",\n                    args: {\n                        item: row.item_code,\n                        uom: row.uom\n                    },\n                    callback: function (r) {\n                        console.log(r);\n                        if(!isEmpty(r.message)) {\n                            // row.margin_type = \"Percentage\";\n                            // row.discount_percentage = r.message[0].discount_percentage;\n                            console.log(r.message[0].name);\n                            row.pricing_rule = r.message[0].name;\n                        }\n                        else {\n                            row.pricing_rule = \"\";\n                            frappe.msgprint(\"no Princing Rule found.\");\n                        }\n                        refresh_field(\"items\");\n                    }\n                });\n            }\n    }\n});", 
  "script_type": "Client"
 }
]